<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App - Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
</head>

<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors">
    <% if (session) { %>
        <script src="https://cdn.jsdelivr.net/npm/jwt-decode/build/jwt-decode.min.js"></script>
        <script>
                const session = "<%= session %>";
                document.cookie = {
                    'accessToken': session,
                    httpOnly: true,
                    secure: false,
                    maxAge: 30 * 60 * 1000 // 30 minutes
                };
            </script>
            <!-- Navbar -->
            <header
                class="bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700">
                <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
                    <h1 class="text-2xl font-bold text-blue-600 dark:text-blue-400">Chat App</h1>

                    <!-- Desktop Nav -->
                    <nav class="hidden md:flex gap-6 items-center">
                        <a href="#" class="hover:text-blue-600 dark:hover:text-blue-400">Home</a>
                        <a href="#" class="hover:text-blue-600 dark:hover:text-blue-400">Features</a>
                        <a href="#" class="hover:text-blue-600 dark:hover:text-blue-400">About</a>
                        <button id="theme-toggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700">
                            üåô
                        </button>
                    </nav>

                    <!-- Mobile Right Side (Hamburger + Theme Toggle) -->
                    <div class="flex items-center gap-2 md:hidden">
                        <button id="theme-toggle-mobile" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700">
                            üåô
                        </button>
                        <button id="menu-btn" class="p-2 rounded bg-gray-200 dark:bg-gray-700">
                            <svg id="menu-icon" class="h-6 w-6 text-gray-800 dark:text-white" fill="none"
                                stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Mobile Dropdown -->
                <div id="menu-dropdown"
                    class="hidden flex-col gap-4 px-4 py-4 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 md:hidden">
                    <a href="#" class="block hover:text-blue-600 dark:hover:text-blue-400">Home</a>
                    <a href="#" class="block hover:text-blue-600 dark:hover:text-blue-400">Features</a>
                    <a href="#" class="block hover:text-blue-600 dark:hover:text-blue-400">About</a>
                </div>
            </header>

            </header>

            <!-- Hero Section -->
            <section class="max-w-4xl mx-auto px-6 py-16 text-center">
                <h2 class="text-4xl font-bold mb-4">Welcome to <span class="text-blue-600 dark:text-blue-400">Chat
                        App</span>
                </h2>
                <p class="text-gray-600 dark:text-gray-300 mb-8">Connect instantly and securely with anyone, anytime.
                    Start
                    chatting now!</p>

                <!-- Search + Button -->
                <div class="flex flex-col md:flex-row justify-center items-center gap-4">
                    <div class="flex w-full md:w-2/3">
                        <input id="search-input" type="text" placeholder="Search rooms..."
                            class="flex-1 px-4 py-2 rounded-l-full bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400" />
                        <button
                            class="px-4 bg-blue-600 dark:bg-blue-500 text-white rounded-r-full hover:bg-blue-700 dark:hover:bg-blue-600 transition">
                            üîç
                        </button>
                    </div>
                    <button id="Room-Btn"
                        class="px-6 py-3 bg-blue-600 dark:bg-blue-500 text-white rounded-full shadow hover:bg-blue-700 dark:hover:bg-blue-600 transition">
                        üöÄ Create Room
                    </button>
                </div>
            </section>

            <!-- Filler Content -->
            <section class="max-w-6xl mx-auto px-6 py-12 grid gap-6 md:grid-cols-3">
                <div
                    class="p-6 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm">
                    <h3 class="font-semibold mb-2">üîí Secure</h3>
                    <p class="text-gray-600 dark:text-gray-300">Your chats are encrypted end-to-end.</p>
                </div>
                <div
                    class="p-6 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm">
                    <h3 class="font-semibold mb-2">‚ö° Fast</h3>
                    <p class="text-gray-600 dark:text-gray-300">Experience real-time conversations without delays.</p>
                </div>
                <div
                    class="p-6 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm">
                    <h3 class="font-semibold mb-2">üåç Connect</h3>
                    <p class="text-gray-600 dark:text-gray-300">Chat with anyone, anywhere in the world.</p>
                </div>
            </section>

            <script>
                // Apply theme from localStorage
                if (localStorage.getItem("theme") === "dark") {
                    document.documentElement.classList.add("dark");
                } else {
                    document.documentElement.classList.remove("dark");
                }

                const toggleTheme = () => {
                    const isDark = document.documentElement.classList.toggle("dark");
                    localStorage.setItem("theme", isDark ? "dark" : "light");
                };

                document.getElementById("theme-toggle").addEventListener("click", toggleTheme);
                document.getElementById("theme-toggle-mobile").addEventListener("click", toggleTheme);

                // Mobile dropdown
                const menuBtn = document.getElementById("menu-btn");
                const menuDropdown = document.getElementById("menu-dropdown");
                menuBtn.addEventListener("click", () => {
                    menuDropdown.classList.toggle("hidden");
                });

                // Start Chatting -> focus search bar
            </script>
        <% } %>
    <% if (!session){ %>
        <script>
            // Redirect to login if no session
            alert("You must be logged in to access this page.");
            window.location.href = "/";
        </script>
    <% } %>
</body>
<script src="/socket.io/socket.io.js"></script>
<!-- <script>
    const socket = io();
</script> -->
</html>